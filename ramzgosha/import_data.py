import os
import django
import random
from datetime import date, timedelta

# 1. ุชูุธูุงุช ุงููู ุจุฑุง ุงูฺฉู ุฌูฺฏู ุฏุฑ ุงู ูุงู ฺฉุงุฑ ฺฉูุฏ
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ramzgosha.settings')
django.setup()

# ุญุงูุง ูโุชููู ูุฏูโูุง ุฑู ุงููพูุฑุช ฺฉูู
from django.contrib.auth.models import User
from puzzles.models import Puzzle


def populate():
    # 2. ฺฏุฑูุชู ฺฉุงุฑุจุฑ
    user = User.objects.first()
    if not user:
        print("โ ุฎุทุง: ฺฉุงุฑุจุฑ ูพุฏุง ูุดุฏ! ูุทูุง ุงูู ฺฉ superuser ุจุณุงุฒุฏ.")
        return

    print(f"๐ค ูุนูุงูุง ุจุฑุง ฺฉุงุฑุจุฑ '{user.username}' ุซุจุช ุฎูุงููุฏ ุดุฏ.")

    # 3. ูุณุช ุฏุชุง
    puzzles_data = [
        {
            "answer": "ูุฑุฏูฺฉ",
            "clue": "{fod}ุณุฑฺฏุฑุฏ{/fod} {ind}ุจุฏูู ฺฉูุงูุด{/ind}ุ ุฎูุฏุด ุฑุง ุฏุฑ {ind}ุงูุชูุง{/ind} {fod}ุชุนุฏุงุฏ ุฒุงุฏ ุขุฏู{/fod} ฺฏุฐุงุดุช ู {def}ุจุง ุขู ุฏุฏ{/def}",
            "def": "ุชุนุฑู ูุง 'ุจุง ุขู ุฏุฏ' ุงุณุช ฺฉู ุงุดุงุฑู ุจู ูุฑุฏูฺฉ ฺุดู ุฏุงุฑุฏ.",
            "fod": "'ุณุฑฺฏุฑุฏ' ุงฺฏุฑ ฺฉูุงูุด (ุณุฑฺฉุด ุญุฑู ฺฏ) ุฑุง ุจุฑุฏุงุฑู ูโุดูุฏ 'ฺฉุฑุฏ' ุง ุญุฑู 'ฺฉ'. 'ุชุนุฏุงุฏ ุฒุงุฏ ุขุฏู' ูู ูุนุงุฏู 'ูุฑุฏู' ุงุณุช.",
            "ind": "ุชุฑฺฉุจ 'ูุฑุฏู' ุจุง 'ฺฉ' ฺฉููู ูุฑุฏูฺฉ ุฑุง ูโุณุงุฒุฏ."
        },
        {
            "answer": "ูููู",
            "clue": "{ind}ุฏุฑูู{/ind} {fod}ุงูููุฏ{/fod} ุจู ุฏูุจุงู {fod}ููุดุฃ ูุณุช{/fod}ุ {def}ุฌุง ุจุฑุง ุขุณุงุด{/def}",
            "def": "ุฌุง ุจุฑุง ุขุณุงุด ุง ููุงู ุฎุงูู/ูุงูู.",
            "fod": "ุงฺฏุฑ ุจู 'ุฏุฑูู' ฺฉููู ุงูููุฏ ุฏูุช ฺฉูุฏ ุญุฑูู 'ููู' ุฑุง ูโุจูุฏ. ููุดุฃ (ุงุจุชุฏุง) ฺฉููู 'ูุณุช' ูู ุญุฑู 'ู' ุงุณุช.",
            "ind": "ุงู ุญุฑูู ุฏุฑ ฺฉูุงุฑ ูู 'ูููู' ุฑุง ูโุณุงุฒูุฏ."
        },
        {
            "answer": "ุขุฑุงู",
            "clue": "{ind}ูพุงุฒ{/ind} {fod}ุจุงุจุงู{/fod}ุ {ind}ุจุฏูู{/ind} {fod}ูุญุจุช{/fod} ุงุณุช. {ind}ุจุฏูู ููุจ{/ind} ุงุณุช. {ind}ุจุฏูู ุดุฑูุน ุจุฑุง{/ind} {fod}ุฏุงู{/fod} ุงุณุช. {def}ุจุฏูู ุฎุดููุช{/def} ุงุณุช.",
            "def": "ุจุฏูู ุฎุดููุช ูุนุงุฏู ฺฉููู ุขุฑุงู ุงุณุช.",
            "fod": "ุงุฒ 'ุจุงุจุงู'ุ ูพุงุฒ (ุขุจุงู) ุฑุง ุญุฐู ฺฉูุฏ -> 'ุจ'. ูุญุจุช (ููุฑ) ุญุฐู ุดุฏ. ููุจ (ูุณุท) ุขุฐุฑ ุญุฐู ุดุฏ -> 'ุขุฑ'. ุดุฑูุน ุฏุงู (ุฏ) ุญุฐู ุดุฏ -> 'ุงู'.",
            "ind": "ุชุฑฺฉุจ ุจุงููุงูุฏูโูุง ฺฉููู 'ุขุฑุงู' ุฑุง ูโุณุงุฒุฏ."
        },
        {
            "answer": "ูุงููุง",
            "clue": "{fod}ุงู{/fod} {ind}ุจุงุฒฺฏุดุช{/ind} ุจู {fod}ูุงู{/fod} ู {def}ุจู ูุฑุฏู ุขุฐููู ุฏุงุฏ{/def}",
            "def": "ฺฉุณ ฺฉู ุจู ูุฑุฏู ุขุฐููู (ูุงู) ูโุฏูุฏ.",
            "fod": "ฺฉููู 'ุงู' ุงฺฏุฑ ุจุงุฒฺฏุฑุฏุฏ (ุจุฑุนฺฉุณ ุดูุฏ) ูโุดูุฏ 'ูุง'.",
            "ind": "ฺุณุจุฏู 'ูุงู' ุจู 'ูุง' ฺฉููู ูุงููุง ุฑุง ูโุณุงุฒุฏ."
        },
        {
            "answer": "ุจุฑฺฏู",
            "clue": "{def}ุฑู ุขู ููุดุช{/def}: ุจุง {fod}ฺฏุฑุจู{/fod} {ind}ูุฑ ฺฉุงุฑ ูุฎูุงู ุจฺฉู{/ind}",
            "def": "ฺุฒ ฺฉู ุฑู ุขู ูโููุณูุฏ.",
            "fod": "ุญุฑูู ฺฉููู 'ฺฏุฑุจู'.",
            "ind": "ุนุจุงุฑุช 'ูุฑ ฺฉุงุฑ ูุฎูุงู ุจฺฉู' ุงุดุงุฑู ุจู ุจูู ุฑุฎุชู ุญุฑูู (Anagram) ุฏุงุฑุฏ."
        },
        {
            "answer": "ุงุฑุชุด",
            "clue": "{def}ูุฑู ุฒูู{/def}ุ {fod}ุงุณุชุงุฏู ุฏุฑ ุบุจุงุฑ{/fod} ุฏุฑ {fod}ุฑุดุช{/fod} {ind}ุขุดูุจ ุจู ูพุง ฺฉุฑุฏ{/ind}",
            "def": "ูุฑู ุฒูู.",
            "fod": "ุญุฑู ุงูู (ุง) ฺฉู ุฏุฑ ฺฉููู 'ุบุจุงุฑ' ุงุณุชุงุฏู ุงุณุชุ ุจู ููุฑุงู ุญุฑูู 'ุฑุดุช'.",
            "ind": "ุขุดูุจ ุจู ูพุง ฺฉุฑุฏู ุนู ุญุฑูู ุฑุดุช ุฑุง ุจูู ุจุฑุฒู ู ุจุง ุงูู ุชุฑฺฉุจ ฺฉูู."
        },
        {
            "answer": "ุงฺฏุฑ",
            "clue": "{def}ุดุงุฏ{/def} ุฏุฑ {fod}ุฒุงฺฏุฑุณ{/fod}{ind}ุ{/ind}",
            "def": "ุดุงุฏ.",
            "fod": "ฺฉููู ุฒุงฺฏุฑุณ.",
            "ind": "ุนูุงูุช ุณูุงู ู ุญุฑู ุงุถุงูู 'ุฏุฑ' ูุดุงู ูโุฏูุฏ ฺฉู ูพุงุณุฎ ุฏุฑ ุฏู ฺฉููู ุฒุงฺฏุฑุณ ูพููุงู ุดุฏู ุงุณุช."
        },
        {
            "answer": "ูพุชุฒุง",
            "clue": "{def}ฺฉ ุบุฐุง ุฎูุดูุฒู{/def}: {ind}ุชู ูุงูุฏูโโ{/ind} {fod}ูุงุณุช{/fod} ุฑุง ุจุง {fod}ูพุงุฒ{/fod} {ind}ุชฺฉู ุชฺฉู ุดุฏู{/ind} ุชุฑฺฉุจ ฺฉูุฏ.",
            "def": "ูุงู ุบุฐุง.",
            "fod": "ุชู ูุงูุฏูโ (ุญุฑู ุขุฎุฑ) ูุงุณุช ูโุดูุฏ 'ุช'. ูพุงุฒ ุชฺฉู ุชฺฉู ุดุฏู ุนู ุญุฑูู ูพุงุฒ ุจูู ุฑุฎุชู (ูพ  ุง ุฒ).",
            "ind": "ุชุฑฺฉุจ ุญุฑู 'ุช' ุฏุฑ ูุงู ุญุฑูู ุจูู ุฑุฎุชูโ ูพุงุฒุ 'ูพุชุฒุง' ุฑุง ูโุณุงุฒุฏ."
        },
        {
            "answer": "ูุงุฏู",
            "clue": "{fod}ุงูุณุงู{/fod} {ind}ูุงุฑููู ุฏุฑ{/ind} {fod}ฺูุฏุงู{/fod} {ind}ุจุนุฏ ุงุฒ{/ind} {ind}ฺูุฑู{/ind} {fod}ูุงุธุฑ{/fod} {def}ูพุดูุงู ุดุฏ{/def}",
            "def": "ูพุดูุงู.",
            "fod": "ุฏุฑ ฺฉููู ฺูุฏุงูุ ฺฉููู ุงูุณุงู (ุขุฏู) ุจู ุตูุฑุช 'ูุฏุข' (ูุงุฑููู) ูุฌูุฏ ุฏุงุฑุฏ. ฺูุฑู (ุญุฑู ุงูู) ูุงุธุฑ ูู 'ู' ุงุณุช.",
            "ind": "ุชุฑฺฉุจ 'ู' ุจุง 'ุขุฏู'ู ูุงุฑููู."
        },
        {
            "answer": "ุดฺฉูุงุช",
            "clue": "{def}ููููโุงุ ฺฏุงู ุณูุชุ ฺฏุงู ุดู{/def}. ุฏุฑ {ind}ุงุจุชุฏุง{/ind} {fod}ุดฺฉุฑ{/fod}ุ ุณูพุณ {fod}ูููโ ูุฑุณุฏูโ{/fod} {ind}ูุฎููุท{/ind}ุ ู ุฏุฑ {ind}ุขุฎุฑ{/ind} {fod}ูุงุณุช{/fod}.",
            "def": "ูุงุฏู ุฎูุฑุงฺฉ ููููโุง.",
            "fod": "ุงุจุชุฏุง ุดฺฉุฑ (ุด). ููู ูุฑุณุฏู (ฺฉุงู) ฺฉู ูุฎููุท ุดุฏู (ฺฉูุง). ุขุฎุฑ ูุงุณุช (ุช).",
            "ind": "ฺุณุจุงูุฏู ุงู ุงุฌุฒุง ุจู ูู."
        },
        {
            "answer": "ุดููุฑ",
            "clue": "{ind}ุจุนุฏ ุงุฒ ุงุชูุงู ูุญุงุตุฑูโ{/ind} {fod}ฺฉุดูุฑ{/fod} ุจู ููุฑุงู {ind}ูุตู{/ind} {fod}ูุฑุงุช{/fod} {def}ุณุงุฑุง ุฏฺฏุฑ ุชููุง ูุณุช{/def}.",
            "def": "ุจุง ูพุฏุง ุดุฏู ุงูุ ุณุงุฑุง ุชููุง ูุณุช (ููุณุฑ).",
            "fod": "ุงฺฏุฑ ุญุฑูู ูุญุงุตุฑูโฺฉููุฏู (ุงูู ู ุขุฎุฑ) 'ฺฉุดูุฑ' ุฑุง ุญุฐู ฺฉููุ 'ุดู' ูโูุงูุฏ. ูุตู ฺฉููู 'ูุฑุงุช' ูู ูโุดูุฏ 'ูุฑ'.",
            "ind": "ุชุฑฺฉุจ ุดู + ูุฑ."
        },
        {
            "answer": "ุตูุฏู",
            "clue": "ุจุง {fod}ฺฉูุด ุฑุงุญุช{/fod} ุฏุฑ {ind}ุงูุชูุง{/ind} {fod}ุฏ{/fod} {def}ูุดุณุชู{/def}.",
            "def": "ูุณููโุง ุจุฑุง ูุดุณุชู.",
            "fod": "ฺฉูุด ุฑุงุญุช (ุตูุฏู). ุงูุชูุง ุฏ ().",
            "ind": "ุชุฑฺฉุจ ุตูุฏู + ."
        },
        {
            "answer": "ุฎุงููุด",
            "clue": "{def}ุฏุฑ ุชุงุฑฺฉ{/def}: {fod}ุขุฎ{/fod} {ind}ุจุฑฺฏุฑุฏ{/ind}!!! {fod}ููุด{/fod}!!!",
            "def": "ูุถุนุช ุชุงุฑฺฉ.",
            "fod": "ฺฉููู 'ุขุฎ' ู 'ููุด'.",
            "ind": "'ุจุฑฺฏุฑุฏ' ุงุดุงุฑู ุฏุงุฑุฏ ฺฉู 'ุขุฎ' ุจุงุฏ ุจุฑุนฺฉุณ ุดูุฏ (ุฎุง) ู ุจู ููุด ุจฺุณุจุฏ."
        },
        {
            "answer": "ูุณุงุญุช",
            "clue": "{def}ฺูุฏุฑ ุจุฒุฑฺฏ ุงุณุช{/def}ุ {fod}ุชูุณุงุญ{/fod} ุฑุง {ind}ุนูุถ ฺฉู{/ind}!",
            "def": "ูุนุงุฑ ุจุฑุง ุจุฒุฑฺฏ (ุงูุฏุงุฒู).",
            "fod": "ฺฉููู ุชูุณุงุญ.",
            "ind": "'ุนูุถ ฺฉู' ุฏุณุชูุฑ ุจูู ุฑุฎุชู ุญุฑูู (Anagram) ุงุณุช."
        },
        {
            "answer": "ุฎููพุงุฑู",
            "clue": "{fod}ูุฎ{/fod} {ind}ุชุงุจ ุจุฑุฏุงุดุชู{/ind}ุ {fod}ูพุงุฑู{/fod} ู {def}ูููุฌุฑ ุดุฏู{/def}.",
            "def": "ุณูุงุญ ฺฉู ูููุฌุฑ ูโุดูุฏ.",
            "fod": "ฺฉููู 'ูุฎ' ู 'ูพุงุฑู'.",
            "ind": "'ุชุงุจ ุจุฑุฏุงุดุชู' ุนู ูุฎ ุฑุง ุจุฑุนฺฉุณ ฺฉูุฏ (ุฎู) ู ุจู ูพุงุฑู ุจฺุณุจุงูุฏ."
        },
        {
            "answer": "ุงุฑุงู",
            "clue": "{def}ุฏุฑ ฺฉุดูุฑู{/def}ุ {fod}ูููโ ุดุจ ูุฏุง{/fod} ุฑุง ุจุง {fod}ฺูุฑูโ ุงุฑ{/fod} {ind}ุชุฑฺฉุจ ฺฉุฑุฏู{/ind}.",
            "def": "ูุงู ฺฉุดูุฑ.",
            "fod": "ููู ูุฏุง (ุงูุงุฑ) ู ฺูุฑู (ุญุฑู ุงูู) ุงุฑ ().",
            "ind": "ุชุฑฺฉุจ ุญุฑูู ุงูุงุฑ ู  ุจู ุตูุฑุช ุจูู ุฑุฎุชู."
        },
        {
            "answer": "ุฑูุง",
            "clue": "{fod}ณฑ ุชุฑ{/fod}ุ {fod}ุงูุงุณุท ุจูุงุฑ{/fod}ุ {def}ุจุนุฏ ุงุฒ ุฒูุฏุงู{/def}",
            "def": "ุขุฒุงุฏ (ุจุนุฏ ุงุฒ ุฒูุฏุงู).",
            "fod": "ณฑ ุชุฑ ุนู ุฑูุฒ ุขุฎุฑ ุชุฑ (ุฑ). ุงูุงุณุท ุจูุงุฑ (ูุง).",
            "ind": "ฺฉูุงุฑ ูู ูุฑุงุฑ ฺฏุฑูุชู ุงู ุจุฎุดโูุง."
        },
        {
            "answer": "ุฑุงุณู",
            "clue": "{fod}ุณูุงุฑ{/fod} ุฑุง {ind}ุนูุถ ฺฉู{/ind}ุ {def}ุจู ุจุฏ ูุฏูุฏ{/def}",
            "def": "ุญูุงู ฺฉู ุจู ุจุฏ ูโุฏูุฏ.",
            "fod": "ฺฉููู ุณูุงุฑ.",
            "ind": "ุนูุถ ฺฉุฑุฏู ุฌุง ุญุฑูู."
        },
        {
            "answer": "ูุฑุฏูุณ",
            "clue": "{def}ุดุงุนุฑ{/def}ุ {fod}ูููุง ุชุงุจ ุฎูุฑุฏู{/fod}ุ {fod}ฒ{/fod}:{fod}ณฐ{/fod}",
            "def": "ูุงู ุดุงุนุฑ.",
            "fod": "ูู ุชุงุจ ุฎูุฑุฏู (ูุฑ). ุนุฏุฏ ฒ (ุฏู). ุนุฏุฏ ณฐ (ุณ).",
            "ind": "ุฎูุงูุฏู ุงู ุงุฌุฒุง ูพุดุช ุณุฑ ูู."
        },
        {
            "answer": "ุชูพุงูฺู",
            "clue": "{fod}ุขูฺู ฺฏุฐุดุช{/fod} ุงุฒ ูพุณ {ind}ุงูุชูุง{/ind} ู {ind}ุงุจุชุฏุง{/ind} {fod}ุฐุงุช{/fod} {fod}ูพุณุฑ{/fod} {def}ุงุบูุจ ุงูุฑุงุฏ ุฑุง ูฺฉุดุฏ{/def}",
            "def": "ูุณููโุง ฺฉุดูุฏู (ุณูุงุญ).",
            "fod": "ฺฉููู 'ุขูฺู'. ุงูุชูุง ุฐุงุช (ุช). ุงุจุชุฏุง ูพุณุฑ (ูพ).",
            "ind": "ูุฑุงุฑ ฺฏุฑูุชู 'ุขูฺู' ูพุณ ุงุฒ ุญุฑูู 'ุช' ู 'ูพ'."
        }
    ]

    # 4. ุจุฑ ุฒุฏู ูุณุช
    random.shuffle(puzzles_data)
    print("๐ฒ ูุนูุงูุง ุจุฑ ุฒุฏู ุดุฏูุฏ...")

    # 5. ุซุจุช ุฏุฑ ุฏุชุงุจุณ
    start_date = date(2026, 2, 12)
    current_date = start_date
    count = 0

    for p_data in puzzles_data:
        # ุงฺฏุฑ ุฏุฑ ุชุงุฑุฎ ููุฑุฏ ูุธุฑ ูุนูุง ูุณุชุ ุจุฑู ุฑูุฒ ุจุนุฏ
        # while Puzzle.objects.filter(date=current_date).exists():
        #     print(f"โ๏ธ ุฏุฑ ุชุงุฑุฎ {current_date} ูุนูุง ูุฌูุฏ ุฏุงุฑุฏุ ูุฑูู ุฑูุฒ ุจุนุฏ...")
        #     current_date -= timedelta(days=1)
        # Puzzle.objects.filter(date=current_date).delete()
        Puzzle.objects.create(
            date=current_date,
            author=user,
            tagged_clue=p_data['clue'],
            answer=p_data['answer'],
            desc_definition=p_data['def'],
            desc_fodder=p_data['fod'],
            desc_indicators=p_data['ind']
        )

        print(f"โ ูุนูุง '{p_data['answer']}' ุจุฑุง ุชุงุฑุฎ {current_date} ุซุจุช ุดุฏ.")

        current_date -= timedelta(days=1)
        count += 1

    print(f"\n๐ ุชูุงู! {count} ูุนูุง ุจุง ููููุช ุงุถุงูู ุดุฏูุฏ.")


if __name__ == '__main__':
    populate()